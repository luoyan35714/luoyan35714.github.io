---
layout: post
title:  定时器之（四） - 分布式定时器集群架构需求
date:   2015-09-17 19:51:00 +0800
categories: 技术文档
tag: 定时器设计
---

* content
{:toc}


1. 最基本的定时功能
    - 根据Cron方式定义
    - 保证加载效率-使用DelayQueue和ScheduledThreadPoolExecutor相结合的方式实现

2. 保证在集群中，定时器只有一次被触发执行
    - Zookeeper的分布式锁

3. 定时器可以拆分执行。
    - 根据不同的拆分策略，提供拆分方法，参照TBSchedule和Hadoop的方式

4. 日志齐全。
    - 包括异常捕获和记录，

5. 自动重连
    - 当遇到连接错误，直接切换下一个Node执行
    - 程序可以返回2种错误
        - 第一种属于应用错误，集群认为程序执行完成
        - 第二种属于定时器错误，集群认为程序未正确执行，需要切换下一个Node执行，直到集群中所有机器都执行一遍。
        
6. 运维：管理WEB APP，设置一些参数，和查看异常信息记录

<br />
<br />